---
layout: post
author: Bob Guo
title: Ryzen & Shine
subtitle: 惠普Probook 645 G4工程样评测兼Zen架构工程样品处理器分析
date: 2020-10-28
tags: 惠普 捡垃圾 Probook 笔记本 锐龙
published: true #write true to publish this article.
---
首先，标题这句话是照抄LinusTechTips的锐龙评测的。我很诚实。  
其次，我之前确实说过再装锐龙我是傻逼，很好，我是傻逼。  
最后，工程样机有风险，入坑之前请谨慎。  
好，现在开始
## 缘起
好吧，倒也没啥可以缘起的。之前用的笔记本ThinkPad T430屏幕太烂、平板Latitude 5175性能太差，都没法承担我主力mobile computing platform的重任，恰巧刷到这个一千块的锐龙本，别的不说，好歹是Zen架构的U，虽然不敌现在新架构但打打我之前用的35w Ivy Bridge和4.5w Skylake总没问题吧？PD充电能直接导入我的移动设备生态、支持双通道DDR4、NVMe固态硬盘和标准2.5寸SATA硬盘完美利用我这边剩下的边角料（虽然还是找本地LUG的老哥买了个960 EVO），还有爷最爱的指点杆，买了买了（笑）  
其实我本来想买GS30的，那台机器是我个人觉得pre ryzen days最有意思的机器之一，通过直接引出PCIe达到性能和便携性的完美平衡，不仅在GPU性能上不用卡死在一代机器上，还能够直接使用包括P106在内的各种PCIe拓展卡，直接提升了机器综合的可玩性，不过在咸鱼上没找到好机器就此作罢，加上又买了一套锐龙ES平台，于是最后就定下来这台机器了。  
## 配置、外观、拓展 and everything
### 外观
典型的惠普商务本设计风格，这种风格从早年Elitebook开始就没怎么变动，作为一个怀旧的人，我表示爱了爱了。不过有一说一不吹不黑纯路人，这个屏幕边框是真的离谱。
### 硬件配置
我这台电脑搭载了一颗AMD Ryzen  7移动处理器，具体型号是：AMD Eng Sample: ZM2000C4T4MF2_36/20_N。根据这份来自[MoePC](http://www.moepc.net/)的[AMD处理器工程样品编号指南](http://www.moepc.net/content/uploadfile/201811/8d7b1542898939.png)，我这颗处理器是一颗已经进入QS阶段的、标称频率2.0Ghz的、属于15w Raven/Picasso -U家族的、使用FP5 BGA接口的、四核心的、4x512K L2+4M L3、B步进的、能加速到3.6Ghz的处理器。鉴于这颗处理器的定位，有理由怀疑它同样搭载了10个AMD RX Vega GPU核，不过似乎由于系统原因radeontop无法正常工作读取数据。由于这台工程机的BIOS是惠普内部RD用的00.87.00版本，无论是Windows还是我常用的Arch Linux都难以正常驱动。根据与最早的卖家的对话，似乎这个vBIOS版本导致了在更新的Linux内核中其GPU无法被驱动访问，导致除Ubuntu 18.04.1和Debian 10之外的所有主流桌面发行版安装镜像都在通过GRUB后黑屏。也还算是运气，我入门就是靠Ubuntu，加上18.04LTS仍然在三年LTS期限内，倒也还不是不能用。至于Windows，无论是Windows Update还是从AMD官网或HP官网下载的驱动都是没法正常工作的，理由同上。而FreeBSD我不会用；强行Hackintosh不仅需要花两百块投资一张十有八九用不上的博通无线网卡，在Zen架构的处理器上运行Darwin内核还需要对内核进行大量的改动，实在是得不偿失。
#### CPU
Zen架构在2017年可谓是对Intel的当头一棒：以远低于Intel的单位成本提供了相差无几的性能表现，随后的Zen+与Zen2更是将“相差无几”变成了“平起平坐”，而即将到来的Zen3更是在IPC上反超Intel，不过这是后话了。这颗2700U的ES片基于格罗方德的14nm工艺打造，基于Raven Ridge架构，是Zen架构的APU型号。这颗处理器的标称频率为2.0Ghz，在Precision Boost下可达到3.6Ghz，配合四颗物理核心应对我的需求（Minecraft、文书处理、看视频）绰绰有余。
#### GPU
这颗GPU才是我抛弃所有Intel方案转投Zen的核心原因。由于我需要我的笔记本能够承担一些轻度的多媒体娱乐，基于成熟的GCN架构的Raven Ridge APU虽然性能不如NVIDIA的独立显卡，但对于我的需求来说也已经绰绰有余。在轻薄本上达到1080p60fps的Minecraft体验在Raven Ridge出现之前几乎是不可想象的，而Dr.Lisa Su的传统强项GPU配合高性能的CPU更是如虎添翼。
#### DRAM
我使用的内存仍然是上次Latitude E7470时的“Legacy”-两条8GB DDR4 2666内存，组成16GB DDR4 双通道内存。由于这代处理器仅支持2400的速度，虽然内存速度影响GPU性能，但是在不超频的情况下我也没啥办法。SO-DIMM某种意义上作为旧时代的legacy在新式的笔记本中越发少见，似乎所有厂商都开始学习苹果的恶臭操作对用户开刀。诚然，若非我这样的玩家，正常用户在整台设备的生命周期中会更换内存的次数屈指可数，而且SO-DIMM而非BGA设计对设备的厚度也有一定的增加，对于现在笔记本越做越薄的趋势来说是毁灭性的，甚至也有人以可靠性说事，认为全BGA的方案更为可靠。To be fair, they all makes sense，但是我仍然无法接受这种说辞。在我看来，除非是真的需要做到极致轻薄（例如我之前评测过的XPS12与Latitude 5175），否则这种说辞纯粹是厂商为了赚取更多利润而发表的屁话。华为因为其在笔记本领域大量采用2666速率的DDR4内存而被社群厌恶，而如果此时采用的是SO-DIMM方案，无论对于华为还是对于用户来说解决方案都十分简单明了：定一批高速内存，然后自己更换。而且，使用SO-DIMM方案也可以让厂商有更加灵活的SKU，而不用为了提供不同的SKU挤占库存。当然，众所周知，11系Intel处理器的Xe集显需要使用LPDDR4x 4266内存才能达到最佳的效率，这种情况下为了达到最佳的性能我也不反对采用BGA式的内存设计。
#### Storage
这次的机器实现了多盘纯SSD的存储方案：一张三星960 EVO安装Ubuntu 18.04.1操作系统；一张英特尔DC S3500存放测试用文件；一张Lexar 128G TF卡存放视频文件。除了最后一个之外，另外两张盘的质量我不用过多介绍，懂得都懂：三星自家3D TLC颗粒、Intel企业级MLC颗粒的性能配合高质量的主控和DRAM Cache能够保证在我的使用情况下的优秀表现。这台机器仍然支持2.5英寸的SATA硬盘从某种程度上确实令人震惊，毕竟随着NVMe的更大规模普及，这种legacy的form factor在商务本中继续存在的意义有多大实在是存在争议。当然，有总是好的，不过我个人更希望像2014年戴尔XPS15一样提供一个“低容量电池+HDD”和“高容量电池”的选择，这样会是一个更灵活的方案。
#### Internet
这次的机器，作为一台商务本，也有三种网络连接方案：RJ45有线网络、Wi-Fi与LTE。我这台机器本来的有线和无线方案都来自于RealTek，不过后者被我换成了闲置的AC 7260。LTE方案还是传统的SIM卡+NGFF卡，机器也很贴心地提供了所有必要的天线。对于我来说，自始至终我都没有认为基于笔记本的LTE方案对于这种普通商务本有什么存在的必要，即使存在像野外探险这样、需要通过LTE方式传输数据的需求，这台中端商务本也显然不适合处理这种工作。
#### Display
这我不得不喷一下惠普的「」团队了。这「」是一台2018年的商务本，传统艺能76845TN就不说了，请问贵司团队如何天才地决定了所有屏幕都是45sRGB（还「」的不是NTSC，更惨）的？坠高贵的FHD触屏也是这种狗屎级别的屏幕，比华硕天选还「」。  
不过有一点好是什么呢？这玩意儿屏幕还算好换，而且用的是30针eDP排线，所以完全可以自己更换质量更高的屏幕。我这台机器就换了一块友达光电的屏幕，型号是B140HAN01.2，满足72%NTSC的一般标准，属于及格的屏幕。
### 接口
这台电脑既然隶属于HP Probook商务本系列，其IO配布自然是实用至上主义。相较于Latitude更传统的蚌壳架构导致分析这台电脑的IO不需要像Latitude那样拍四面图片即可。三个USB3、HDMI、VGA、耳机口、全功能C口、电源、TF卡、千兆网口和拓展坞接口，实在是具有商务本的特性：一切以商务用途为中心：VGA和HDMI保证能够连接主流的投影仪和显示器，Type-C不仅可以配合转接器使用也可以独立输出视频信号与更先进的设备联动；有线网口方便调试配置进入安全网络环境；四个USB接口保证了可以外接多个设备同时进行工作；PD与AC两种充电方式在使用中有更为灵活的电力补充方案。这种灵活的IO在某种意义上也成为了商务本的必备属性，作为一个接口不够用症重度患者，我对这种设计思路是很赞赏的。
### 安全性
既然是商务本就不得不聊到安全性问题了。对于企业用户来说，数据安全自然是重中之重；而商务本的溢价中有一部分就支付给了全套的安全方案。这台电脑的安全方案主要有以下几种：BIOS层面的双校验（HP SureStart）、硬盘加密、智能卡、指纹识别、OS密码。
#### Sure Start
HP SureStart技术上就跟技嘉DualBIOS类似，在主板上有两个装载BIOS镜像的芯片，其中一片作为主片另一片作为备片。在开机时，BIOS文件会进行验证，如果BIOS验证出现问题，则备片的文件将会自动覆写主片并提示用户，我也利用这种方法获得了一份00.87.00的BIOS文件。根据试验，发现靠近散热器一侧的芯片为主片，另一片为备片。若不存在备片/备片数据不正确则无法开机，有可能是备片中存在DRM程序。
#### 指纹模块
这台电脑上的指纹模块是MicroTips的VFS495，在Linux上支持很麻烦，故不做评价。据说Ubuntu 20.10将会对指纹解锁做官方层面的oob支持，我很期待。
